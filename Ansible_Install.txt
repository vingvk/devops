Ansible Installation

Create 2 or more Machines  and name one as Control Server and others as Remote machines
Control  Server (RHEL):
  
   Controll server set up steps

        vi  /etc/yum/pluginconf.d/subscription-manager.conf  and change enable=0  to disabale redhat subscriptions.

   1  rpm -Uvh https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm
   2  yum update
   3  yum install ansible
   4  ansible --version
   5  yum update
   6  adduser demouser
   7  passwd demouser

      # To give root privileges to ansible user
   8  visudo
      demouser ALL=(ALL)  NOPASSWD:ALL

      # By default in AWS OS images are designed for password less(.pem/.ppk Key based authentication) authentication
      # SO we have to make it password based authentication for ansible user to communicate.
   9  vi /etc/ssh/sshd_config
   
      passwordAuthentication yes
      permitrootlogin yes

   10 service sshd restart
   11 su - demouser
      
      # Ansible communicates via ssh , so generate SSH keys and ID's and copy them into remote machine.
   12 ssh-keygen
   
   
EXECUTE REMOTE MACHINE STEPS listed in complete bottom of this page ON ALL REMOTE MACHINES and then continue from step 13

   13  ssh-copy-id demouser@<private Ip address/ DNS> //remote machine ip address
   14  ssh <private Ip address/ DNS>  
 
       # you should be able to login to remote machine with out password prompt
   15  cd /etc/ansible/
   16  ls
   17  sudo mv hosts hosts.ori
   18  sudo vi hosts

   	[webserver] give anykind of group name
   	<private Ip address/ DNS> #  pvt dns/ IP  of remote host

   19  ansible [webserver] -m  ping // enter the group name here
      
   20  touch mytest.txt
   21  scp mytest.txt demouser@<private Ip address/ DNS>:/home/demouser    # pvt dns of remote host
   22  Login to remote host as ansible user and check the file mytest.txt is available at the location /home/ansible
   //
  ====================================================================== 
      
 Remote Machine set up steps  (RHEL)
 
    1  yum update -y
    2  adduser demouser
    3  passwd demouser
    4  visudo

       demouser ALL=(ALL)  NOPASSWD:ALL

    5   vi /etc/ssh/sshd_config
      
       passwordAuthentication = yes
       permitrootlogin yes

    6  service sshd restart 
	
    7  su - demouser







---
- hosts: demoserver
  tasks:
  - name: installing httpd
    yum:
      name: httpd
      state: present
  - name: start httpd
    service:
      name: httpd
      state: started

   


       
